<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="ä¸æ±‚æ·±åˆ»,ä½†æ±‚ç®€å•."><title>iOS9 ä¸­çš„ 3D Touch | ä¸€æœµè¥¿å…°èŠ±</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/rss+xml" href="/rss2.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iOS9 ä¸­çš„ 3D Touch</h1><a id="logo" href="/.">ä¸€æœµè¥¿å…°èŠ±</a><p class="description">ä¸æ±‚æ·±åˆ»,ä½†æ±‚ç®€å•.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">iOS9 ä¸­çš„ 3D Touch</h1><div class="post-meta">Nov 6, 2015<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2015/11/06/iOS9_3D_Touch/" href="/2015/11/06/iOS9_3D_Touch/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Apple å‘å¸ƒäº† iPhone 6s / 6s Plus,ä¸ºäº† 3D Touch è¿™ä¸ªåŠŸèƒ½æ–°æ¬¾ iPhone å˜å¾—æ›´é‡æ›´åš.æœç„¶æ˜¯ <code>å”¯ä¸€çš„ä¸åŒ,æ˜¯å¤„å¤„éƒ½ä¸åŒ</code>(ç¬‘.è®©æˆ‘ä»¬æ¥åŠ¨æ‰‹è¯•ä¸€ä¸‹.</p>
<h4 id="Peek_/_Pop"><a href="#Peek_/_Pop" class="headerlink" title="Peek / Pop"></a>Peek / Pop</h4><p>Peek: è½»å‹,æ“ä½œèƒ½è®©ç”¨æˆ·åœ¨ä¸ç¦»å¼€å½“å‰ç•Œé¢çš„æƒ…å†µä¸‹é¢„è§ˆå†…å®¹.<br>Pop: åˆ™æ˜¯å½“ç”¨æˆ·åœ¨ peek å¼¹å‡ºçš„è§†å›¾ä¸ŠåŠ é‡æŒ‰å‹åŠ›åº¦,æ˜¾ç¤ºæ›´è¯¦ç»†çš„å†…å®¹.</p>
<p>æˆ‘ä»¬å…ˆå†™ä¸€ä¸ª UITableViewController çš„ä¸»é¡µé¢</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - UITableViewDateSource</span></span><br><span class="line"><span class="keyword">let</span> <span class="type">CellIdentifier</span> = <span class="string">"TableViewCell"</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">MainViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCellWithIdentifier(<span class="type">CellIdentifier</span>, forIndexPath: indexPath)</span><br><span class="line">        cell.textLabel!.text = <span class="string">"ç¬¬ <span class="subst">\(indexPath.row)</span> è¡Œ Cell"</span></span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨è¦å®ç°ä¸€ä¸‹,ç‚¹å‡» Cell ç„¶åå¼¹å‡ºä¸€ä¸ªé¢„è§ˆè§†å›¾<br><img src="https://github.com/broccolii/broccolii.github.io/raw/master/images/iOS9_3D_Touch/Peek.png" alt=""></p>
<p>.å…ˆè®© MainViewControler å®ç° <code>UIViewControllerPreviewingDelegate</code> åè®®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - UIViewControllerPreviewingDelegate</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">MainViewController</span>: <span class="title">UIViewControllerPreviewingDelegate</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è½»æŒ‰ é¢„è§ˆç•Œé¢</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint)</span></span> -&gt; <span class="type">UIViewController</span>? &#123;</span><br><span class="line">        <span class="keyword">guard</span> #available(iOS <span class="number">9.0</span>, *) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">debugPrint</span>(<span class="string">"åªæ”¯æŒ iOS 9.0 ä»¥ä¸Šç‰ˆæœ¬"</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> indexPath = tableView.indexPathForRowAtPoint(location) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> originRect = tableView.cellForRowAtIndexPath(indexPath)!.frame</span><br><span class="line">        previewingContext.sourceRect = view.convertRect(originRect, fromView: tableView)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// è¿™é‡Œä¸èƒ½ç›´æ¥è·å–åˆ° æ§ä»¶ è¿˜æœªåˆ›å»º</span></span><br><span class="line">        <span class="keyword">let</span> previewVC = storyboard!.instantiateViewControllerWithIdentifier(<span class="string">"PreviewViewController"</span>) <span class="keyword">as</span>! <span class="type">PreviewViewController</span></span><br><span class="line">        previewVC.previewText = <span class="string">"ä½ ç‚¹å‡»äº† <span class="subst">\(indexPath.row)</span> è¡Œ Cell"</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> previewVC</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é‡æŒ‰ è¿›å…¥é¡µé¢</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">previewingContext</span><span class="params">(previewingContext: UIViewControllerPreviewing, commitViewController viewControllerToCommit: UIViewController)</span></span> &#123;</span><br><span class="line"><span class="comment">//        å¯ä»¥é€‰æ‹©è·³è½¬æ­£å¸¸ä¸šåŠ¡æµç¨‹çš„ç•Œé¢</span></span><br><span class="line"><span class="comment">//        performSegueWithIdentifier("gotoDetailViewController", sender: nil)</span></span><br><span class="line">        <span class="comment">// ä¹Ÿå¯ä»¥é€‰æ‹©ç›´æ¥ä½¿ç”¨ preview view controller </span></span><br><span class="line">        showViewController(viewControllerToCommit, sender: <span class="literal">nil</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>æ–¹æ³•ä¸€(Peek): ç”¨æ¥æ˜¾ç¤ºé¢„è§ˆè§†å›¾,é€šè¿‡ <code>location</code> åˆ¤æ–­ç‚¹å‡»äº†å“ªä¸€ä¸ª cell.åœ¨ iOS9 ä¸­æä¾›äº† <code>sourceRect</code> å±æ€§,å¯ä»¥è·å–ç›®æ ‡ Rect,è·å¾—æ›´å¥½çš„å¼¹å‡ºæ•ˆæœ.è¿™é‡Œéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ <code>previewVC</code> çš„æ§ä»¶è¿˜æœªåˆ›å»ºæ˜¯ nil. å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æ§ä»¶èµ‹å€¼,éœ€è¦é€šè¿‡ä¸€ä¸ªå±æ€§,åœ¨ <code>viewDidLoad</code> ä¸­èµ‹å€¼.</li>
<li>æ–¹æ³•äºŒ(Pop): é‡å‡»è¿›å…¥ä¸‹ä¸€ä¸ªé¡µé¢,æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯.è¿™é‡Œå¯ä»¥é€‰æ‹©è·³è½¬åŸæœ¬çš„ä¸šåŠ¡é€»è¾‘,ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥ previewVC.</li>
</ol>
<h4 id="Preview_Action"><a href="#Preview_Action" class="headerlink" title="Preview Action"></a>Preview Action</h4><p>åœ¨ peek å¼¹å‡ºé¢„è§ˆè§†å›¾æ—¶,å¯ä»¥ä¸Šæ»‘æ˜¾ç¤ºå‡ ä¸ªæŒ‰é’®,è®©ç”¨æˆ·åšä¸€äº›å¿«é€Ÿæ“ä½œ.<br><img src="https://raw.githubusercontent.com/broccolii/broccolii.github.io/master/images/iOS9_3D_Touch/Preview_Action.png" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - preview action</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PreviewViewController</span> </span>&#123;</span><br><span class="line">    <span class="preprocessor">@available</span>(iOS <span class="number">9.0</span>, *)</span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">previewActionItems</span><span class="params">()</span></span> -&gt; [<span class="type">UIPreviewActionItem</span>] &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">let</span> action1 = <span class="type">UIPreviewAction</span>(title: <span class="string">"action1"</span>, style: .<span class="type">Default</span>) &#123; (action, viewController) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">debugPrint</span>(action)</span><br><span class="line">            <span class="built_in">debugPrint</span>(viewController)</span><br><span class="line">            <span class="built_in">debugPrint</span>(<span class="string">"taped action1"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// ä¼šå¤šä¸€ä¸ª å°å‹¾å‹¾ ğŸ˜Š</span></span><br><span class="line">        <span class="keyword">let</span> action2 = <span class="type">UIPreviewAction</span>(title: <span class="string">"action2"</span>, style: .<span class="type">Selected</span>) &#123; <span class="number">_</span>,<span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">debugPrint</span>(<span class="string">"taped action2"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// ä¼šå˜çº¢è‰²</span></span><br><span class="line">        <span class="keyword">let</span> action3 = <span class="type">UIPreviewAction</span>(title: <span class="string">"action3"</span>, style: .<span class="type">Destructive</span>) &#123; <span class="number">_</span>,<span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">debugPrint</span>(<span class="string">"taped action3"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [action1, action2, action3]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Home_Screen_Quick_Action"><a href="#Home_Screen_Quick_Action" class="headerlink" title="Home Screen Quick Action"></a>Home Screen Quick Action</h4><p>3D Touch è¿˜å¯ä»¥ç”¨åœ¨ App ICON ä¸Š. æŒ‰å‹ä¼šæ˜¾ç¤º Quick Action,å½“ç”¨æˆ·é€‰æ‹©å…¶ä¸­çš„ Action Itemï¼ŒApp å¯åŠ¨å¹¶è·³è½¬åˆ°ç›¸åº”çš„ç•Œé¢.è¿™ä¸€è¿‡ç¨‹ç›¸å½“äºåœ¨PCä¸Šé¢çš„å³é”®å¿«æ·èœå•çš„åŠŸèƒ½.<br><img src="https://raw.githubusercontent.com/broccolii/broccolii.github.io/master/images/iOS9_3D_Touch/Home_Screen_Quick_Action.png" alt=""><br>Quick Action ä¸»è¦åˆ†æˆ <code>é™æ€å¿«é€Ÿé€‰é¡¹(Static quick actions)</code> å’Œ <code>åŠ¨æ€å¿«é€Ÿé€‰é¡¹(Dynamic quick actions)</code>:</p>
<ul>
<li><code>åŠ¨æ€å¿«é€Ÿé€‰é¡¹(Dynamic quick actions)</code> åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡åŠ è½½åº”ç”¨åå¯ç”¨ã€‚ä½¿ç”¨ UIApplicationShortcutItemã€UIMutableApplicationShortcutItem ä»¥åŠ UIApplicationShortcutIcon ç±»å’Œç›¸å…³çš„APIæ¥å®šä¹‰ åŠ¨æ€å¿«é€Ÿé€‰é¡¹ ã€‚ä½¿ç”¨ shortcutItems å±æ€§æ¥æ·»åŠ åŠ¨æ€å¿«é€Ÿé€‰é¡¹åˆ°åº”ç”¨å…±äº«çš„ UIApplication å¯¹è±¡ä¸­ã€‚</li>
<li><code>é™æ€å¿«é€Ÿé€‰é¡¹(Static quick actions)</code>: å½“ç”¨æˆ·å®‰è£…å®Œåº”ç”¨åç«‹å³å°±èƒ½ä½¿ç”¨ã€‚åœ¨åº”ç”¨çš„ Info.plist æ–‡ä»¶ä¸­çš„UIApplicationShortcutItems æ•°ç»„ä¸­å®šä¹‰ é™æ€å¿«é€Ÿé€‰é¡¹ã€‚</li>
</ul>
<p>åŠ¨æ€å¿«é€Ÿé€‰é¡¹åªéœ€è¦åœ¨ <code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</code> ä¸­æ·»åŠ ç›¸åº”çš„ <code>shortcutItems</code> å°±å¯ä»¥äº†.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">addShortcutItems</span><span class="params">(application: UIApplication)</span></span> &#123;</span><br><span class="line">   <span class="keyword">guard</span> #available(iOS <span class="number">9.0</span>, *) <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 9.1 è¿˜æœ‰æ›´å¤šå¥½ç©çš„ icon type</span></span><br><span class="line">   <span class="keyword">let</span> itemIcon1 = <span class="type">UIApplicationShortcutIcon</span>(type: .<span class="type">Location</span>)</span><br><span class="line">   <span class="keyword">let</span> item1 = <span class="type">UIMutableApplicationShortcutItem</span>(type: <span class="string">"type1"</span>, localizedTitle: <span class="string">"itemIcon1"</span>, localizedSubtitle: <span class="literal">nil</span>, icon: itemIcon1, userInfo: <span class="literal">nil</span>)</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">let</span> itemIcon2 = <span class="type">UIApplicationShortcutIcon</span>(type: .<span class="type">Share</span>)</span><br><span class="line">   <span class="keyword">let</span> item2 = <span class="type">UIMutableApplicationShortcutItem</span>(type: <span class="string">"type2"</span>, localizedTitle: <span class="string">"itemIcon2"</span>, localizedSubtitle: <span class="literal">nil</span>, icon: itemIcon2, userInfo: <span class="literal">nil</span>)</span><br><span class="line">   </span><br><span class="line">   application.shortcutItems = [item1,item2]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ <code>func application(application: UIApplication, performActionForShortcutItem shortcutItem: UIApplicationShortcutItem, completionHandler: (Bool) -&gt; Void)</code> ä¸­å“åº”ç”¨æˆ·çš„æ“ä½œ,è¿›è¡Œé¡µé¢è·³è½¬</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">@available</span>(iOS <span class="number">9.0</span>, *)</span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, performActionForShortcutItem shortcutItem: UIApplicationShortcutItem, completionHandler: <span class="params">(Bool)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> handled = <span class="literal">false</span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span> shortcutItem.type == <span class="string">"type1"</span> &#123;</span><br><span class="line">       <span class="comment">// å¤„ç†é¡µé¢è·³è½¬</span></span><br><span class="line">       handled = <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span> shortcutItem.type == <span class="string">"type1"</span> &#123;</span><br><span class="line">       handled = <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   completionHandler(handled)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™æ€å¿«é€Ÿé€‰é¡¹éœ€è¦åœ¨info.plistä¸­æ·»åŠ ä»¥ä¸‹é¡¹ï¼š<br><img src="https://raw.githubusercontent.com/broccolii/broccolii.github.io/master/images/iOS9_3D_Touch/Static_quick_actions.jpg" alt=""><br><strong>PS: æœ€å¤šå¯ä»¥æ˜¾ç¤º4ä¸ªæ ‡ç­¾ï¼›é™æ€æ ‡ç­¾ä¼˜å…ˆçº§é«˜äºåŠ¨æ€æ ‡ç­¾ï¼›</strong></p>
<h4 id="u68C0_u6D4B_u662F_u5426_u652F_u6301_3D_Touch"><a href="#u68C0_u6D4B_u662F_u5426_u652F_u6301_3D_Touch" class="headerlink" title="æ£€æµ‹æ˜¯å¦æ”¯æŒ 3D Touch"></a>æ£€æµ‹æ˜¯å¦æ”¯æŒ 3D Touch</h4><p>iOS æä¾›äº† <code>forceTouchCapability</code> ç”¨æ¥åˆ¤æ–­ 3D Touch çš„å¯ç”¨æ€§.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">ensure3DTouch</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">guard</span> #available(iOS <span class="number">9.0</span>, *) <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="built_in">debugPrint</span>(<span class="string">"åªæ”¯æŒ iOS 9.0 ä»¥ä¸Šç‰ˆæœ¬"</span>)</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">guard</span> traitCollection.forceTouchCapability == .<span class="type">Available</span> <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="built_in">debugPrint</span>(<span class="string">"ä¸æ”¯æŒ 3D Touch"</span>)</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">   &#125;</span><br><span class="line">   registerForPreviewingWithDelegate(<span class="keyword">self</span>, sourceView: view)</span><br><span class="line">   <span class="built_in">debugPrint</span>(<span class="string">"æ”¯æŒ 3D Touch"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="PS_3A__u5982_u679C_u624B_u5934_u6CA1_u6709_u652F_u6301_3D_Touch__u7684_u8BBE_u5907_2C_u53EF_u4EE5_u4F7F_u7528_SBShortcutMenuSimulator__u8FD9_u4E2A_u63D2_u4EF6_28_u9ED1_u79D1_u6280"><a href="#PS_3A__u5982_u679C_u624B_u5934_u6CA1_u6709_u652F_u6301_3D_Touch__u7684_u8BBE_u5907_2C_u53EF_u4EE5_u4F7F_u7528_SBShortcutMenuSimulator__u8FD9_u4E2A_u63D2_u4EF6_28_u9ED1_u79D1_u6280" class="headerlink" title="PS: å¦‚æœæ‰‹å¤´æ²¡æœ‰æ”¯æŒ 3D Touch çš„è®¾å¤‡,å¯ä»¥ä½¿ç”¨ <a href=" https:="" github.com="" deskconnect="" sbshortcutmenusimulator"="">SBShortcutMenuSimulator</a> è¿™ä¸ªæ’ä»¶(é»‘ç§‘æŠ€">PS: å¦‚æœæ‰‹å¤´æ²¡æœ‰æ”¯æŒ 3D Touch çš„è®¾å¤‡,å¯ä»¥ä½¿ç”¨ <a href="https://github.com/DeskConnect/SBShortcutMenuSimulator" target="_blank" rel="external">SBShortcutMenuSimulator</a> è¿™ä¸ªæ’ä»¶(é»‘ç§‘æŠ€</h6><p><a href="https://github.com/broccolii/3DTouchDemo" target="_blank" rel="external">Demo åœ°å€</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://broccolii.github.io/2015/11/06/iOS9_3D_Touch/" data-id="cilzxnogs000i2y207iirg7d4" class="article-share-link">åˆ†äº«åˆ°</a><div class="tags"><a href="/tags/3DTouch/">3DTouch</a></div><div class="post-nav"><a href="/2015/12/31/ReactiveCocoa_exploration/" class="pre">ReactiveCocoa æ•´ç†</a><a href="/2015/10/02/iOS9_CoreSpotlight/" class="next">iOS9 ä¸­çš„ CoreSpotlight</a></div><div id="disqus_thread"><script>var disqus_shortname = 'broccoliii';
var disqus_identifier = '2015/11/06/iOS9_3D_Touch/';
var disqus_title = 'iOS9 ä¸­çš„ 3D Touch';
var disqus_url = 'http://broccolii.github.io/2015/11/06/iOS9_3D_Touch/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//broccoliii.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><input placeholder="Search" type="text" class="st-default-search-input"/></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/3DTouch/" style="font-size: 15px;">3DTouch</a> <a href="/tags/Alfred/" style="font-size: 15px;">Alfred</a> <a href="/tags/Database/" style="font-size: 15px;">Database</a> <a href="/tags/RunLoop/" style="font-size: 15px;">RunLoop</a> <a href="/tags/CoreSpotlight/" style="font-size: 15px;">CoreSpotlight</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/UITableView/" style="font-size: 15px;">UITableView</a> <a href="/tags/ReactiveCocoa/" style="font-size: 15px;">ReactiveCocoa</a> <a href="/tags/Runtime/" style="font-size: 15px;">Runtime</a> <a href="/tags/Block/" style="font-size: 15px;">Block</a> <a href="/tags/CocoaPods/" style="font-size: 15px;">CocoaPods</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€æ–°æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/03/16/iOS_database/">Core Data, FMDB, Realm æ€§èƒ½å¯¹æ¯”</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/02/Alfred_3_config/">Alfred 2 é…ç½®</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/02/Autolayout_flow/">Auto Layout ç»˜åˆ¶æµç¨‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/04/CocoaPods_private_library/">ä½¿ç”¨ CocoaPods ç®¡ç†ç§æœ‰åº“</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/26/UITableView_Optimization/">UITableView æ€§èƒ½ä¼˜åŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/ReactiveCocoa_exploration/">ReactiveCocoa æ•´ç†</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/06/iOS9_3D_Touch/">iOS9 ä¸­çš„ 3D Touch</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/02/iOS9_CoreSpotlight/">iOS9 ä¸­çš„ CoreSpotlight</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/21/iOS_UIView_CALayer/">iOS ä¸­çš„ UIView å’Œ CALayer</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/02/19/Objective-C_Runtime/">Objective-C ä¸­çš„ Runtime</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><script type="text/javascript" src="//broccoliii.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Â© <a href="/." rel="nofollow">ä¸€æœµè¥¿å…°èŠ±.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','UKkneeeyb79HvjysWVot','2.0.0');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?64b81a3596d6c5ec76f245076ec9bd2a";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>